(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a983bfd"],{"64a2":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:e.$t("views.sysInfo.global"),name:"global"}}),n("el-tab-pane",{attrs:{label:e.$t("views.sysInfo.fuse"),name:"agent"}})],1),"agent"===e.activeName?n("div",[n("div",{staticClass:"agent-btn-box"},[n("el-button",{staticClass:"btn-border",attrs:{icon:"el-icon-circle-plus-outline",size:"small"},on:{click:e.add}},[e._v(" "+e._s(e.$t("views.sysInfo.add"))+" ")])],1),n("el-table",{staticClass:"info-table",attrs:{data:e.jsons,border:""}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),n("el-table-column",{attrs:{label:"自动降级",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.enableAutoFallback?"是":"否")+" ")]}}],null,!1,3335502067)}),n("el-table-column",{attrs:{align:"center",prop:"cluster_name",width:"200",label:e.$t("views.sysInfo.cluster_name")}}),n("el-table-column",{attrs:{align:"center",prop:"cluster_version",label:e.$t("views.sysInfo.cluster_version")}}),n("el-table-column",{attrs:{prop:"priority",label:e.$t("views.sysInfo.priority"),align:"center"}}),n("el-table-column",{attrs:{label:"高频hook限流",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.hookLimitTokenPerSecond)+"/秒 ")]}}],null,!1,1994645370)}),n("el-table-column",{attrs:{label:"高频流量限流",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.heavyTrafficLimitTokenPerSecond)+"/秒 ")]}}],null,!1,2865367735)}),n("el-table-column",{attrs:{label:"CPU阈值",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.cpuUsagePercentage)+"% ")]}}],null,!1,2032301763)}),n("el-table-column",{attrs:{label:"内存阈值",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.memUsagePercentage)+"% ")]}}],null,!1,178680864)}),n("el-table-column",{attrs:{label:"Agent数量",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.memUsagePercentage)+" ")]}}],null,!1,1158683653)}),n("el-table-column",{attrs:{width:"200",label:e.$t("views.sysInfo.operation"),align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"table-btn-box"},[n("el-button",{staticStyle:{color:"#4a72ae"},attrs:{type:"text",size:"small"},on:{click:function(n){return e.edit(t.row)}}},[e._v(" "+e._s(e.$t("views.sysInfo.edit"))+" ")]),n("span",{staticClass:"l"},[e._v(" | ")]),n("el-button",{staticStyle:{color:"#f56262"},attrs:{size:"small",type:"text"},on:{click:function(n){return e.del(t.row)}}},[e._v(" "+e._s(e.$t("views.sysInfo.del"))+" ")])],1)]}}],null,!1,3695492990)})],1)],1):e._e(),"global"===e.activeName?n("div",{staticClass:"form-box"},[n("div",{staticClass:"cpu-box"},[n("div",{staticClass:"moudleTitle-th"},[e._v(" "+e._s(e.$t("views.sysInfo.agentThreshold"))+" "),n("el-popover",{attrs:{placement:"top-start",width:"340",trigger:"hover"}},[n("p",[e._v(e._s(e.$t("views.sysInfo.open")))]),n("p",[e._v(e._s(e.$t("views.sysInfo.close")))]),n("span",{attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-question"}),e._v("： ")])])],1),n("span",{staticStyle:{"margin-right":"16px"}},[e._v(e._s(e.$t("views.sysInfo.cpu"))+" ≥ ")]),1==e.userInfo.role||2==e.userInfo.role?n("el-input-number",{staticClass:"num-input",staticStyle:{"margin-right":"12px"},attrs:{max:100,min:0,controls:!1},model:{value:e.form.cpu_limit,callback:function(t){e.$set(e.form,"cpu_limit",t)},expression:"form.cpu_limit"}}):n("span",[e._v(e._s(e.form.cpu_limit))]),n("span",[e._v(" %")])],1),n("div",{staticClass:"cpu-box"},[n("div",{staticClass:"moudleTitle-th"},[e._v(" "+e._s(e.$t("views.sysInfo.vul_verifiy"))+" "),n("el-popover",{attrs:{placement:"top-start",width:"340",trigger:"hover"}},[n("p",[e._v(e._s(e.$t("views.sysInfo.vul")))]),n("span",{attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-question"}),e._v("： ")])])],1),n("el-switch",{attrs:{disabled:1!==e.userInfo.role&&2!==e.userInfo.role,"active-value":"1","inactive-value":"0"},model:{value:e.form.vul_verifiy,callback:function(t){e.$set(e.form,"vul_verifiy",t)},expression:"form.vul_verifiy"}})],1),n("div",{staticClass:"btn-box"},[1===e.userInfo.role||2===e.userInfo.role?n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.profileModified}},[e._v(e._s(e.$t("views.sysInfo.enter")))]):e._e()],1)]):e._e()],1)},r=[],a=n("1da1"),i=n("d4ec"),o=n("bee2"),l=n("262e"),c=n("2caf"),u=(n("96cf"),n("d3b7"),n("159b"),n("9ab4")),f=n("8c73"),v=n("60a3"),p=function(e){Object(l["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.activeName="global",e.form={cpu_limit:"",vul_verifiy:0},e.jsons=[],e}return Object(o["a"])(n,[{key:"onSubmit",value:function(){console.log("确定")}},{key:"userInfo",get:function(){return this.$store.getters.userInfo}},{key:"getInfo",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n in t=[],this.form)t.push(n);return e.next=4,this.services.setting.profileGet({keys:t});case 4:s=e.sent,201===s.status?s.data.forEach((function(e){r.form[e.key]=e.value})):this.$message.error(s.msg);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"profileModified",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n in t=[],this.form)t.push({value:String(this.form[n]),key:n});return e.next=4,this.services.setting.profileModified(t);case 4:s=e.sent,201===s.status?this.$message.success(s.msg):this.$message.error(s.msg);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_threshold",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.setting.get_threshold();case 2:t=e.sent,201===t.status&&(this.jsons=t.data.result);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"edit",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push({name:"agentConfig",query:{id:t.id}});case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"del",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm(this.$t("views.agentConfig.confirmDel"),"",{confirmButtonText:this.$t("views.agentConfig.confirm"),cancelButtonText:this.$t("views.agentConfig.cancel"),type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.services.setting.del_threshold({id:t.id});case 2:if(s=e.sent,201!==s.status){e.next=7;break}return n.$message.success(s.msg),n.get_threshold(),e.abrupt("return");case 7:n.$message.error(s.msg);case 8:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"add",value:function(){this.$router.push({name:"agentConfig"})}},{key:"activated",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.get_threshold(),this.getInfo();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(f["a"]);p=Object(u["b"])([Object(v["a"])({name:"SysInfo"})],p);var m=p,d=m,h=(n("dc40"),n("2877")),b=Object(h["a"])(d,s,r,!1,null,"706d22be",null);t["default"]=b.exports},be94:function(e,t,n){},dc40:function(e,t,n){"use strict";n("be94")}}]);
//# sourceMappingURL=chunk-3a983bfd.b6b29744.js.map