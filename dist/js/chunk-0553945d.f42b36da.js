(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0553945d"],{"00db":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status-monitoring"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"item",class:t.healthData.dongtai_openapi.status?"green":"red"},[t._v(" "+t._s(t.healthData.dongtai_openapi.status?t.$t("views.statusMonitoring.on"):t.$t("views.statusMonitoring.off"))+" ")]),a("div",{staticClass:"footer"},[a("b",[t._v(t._s(t.$t("views.statusMonitoring.dongtai_openapi")))])])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"item",class:t.healthData.dongtai_engine.status?"green":"red"},[t._v(" "+t._s(t.healthData.dongtai_engine.status?t.$t("views.statusMonitoring.on"):t.$t("views.statusMonitoring.off"))+" ")]),a("div",{staticClass:"footer"},[a("b",[t._v(t._s(t.$t("views.statusMonitoring.dongtai_engine")))])])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"item",class:t.healthData.oss.status?"green":"red"},[t._v(" "+t._s(t.healthData.oss.status?t.$t("views.statusMonitoring.normal"):t.$t("views.statusMonitoring.error"))+" "),a("i",{staticClass:"el-icon-refresh",class:t.reflashFlag&&"loading",on:{click:t.reflash}})]),a("div",{staticClass:"footer"},[a("b",[t._v(t._s(t.$t("views.statusMonitoring.oss")))])])])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("b",[t._v(t._s(t.$t("views.statusMonitoring.engine_monitoring_indicators")))])])]),t._l(t.healthData.engine_monitoring_indicators,(function(e,s){return a("div",{key:s,staticClass:"text"},[t._v(" "+t._s(e.name)+" : "+t._s(t.$t("views.statusMonitoring.padding")+" "+e.value+" "+t.$t("views.statusMonitoring.item"))+" ")])}))],2)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"header"},[a("b",[t._v("清理配置")]),a("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.cacheIo,callback:function(e){t.cacheIo=e},expression:"cacheIo"}})],1)]),a("div",{staticClass:"clear-cache"},[a("div",{staticClass:"clear-cache-box"},[a("span",[t._v("每天")]),a("el-time-picker",{staticStyle:{display:"inline-block",width:"140px",margin:"0 8px"},attrs:{placeholder:"请选择时间点","value-format":"HH:mm",format:"HH:mm",size:"mini"},on:{change:t.cacheTimeChange},model:{value:t.cacheTime,callback:function(e){t.cacheTime=e},expression:"cacheTime"}}),a("span",[t._v("清理")]),a("el-input-number",{staticStyle:{display:"inline-block",width:"140px",margin:"0 8px"},attrs:{min:1,step:1,size:"mini"},model:{value:t.cache,callback:function(e){t.cache=e},expression:"cache"}}),t._v(" 天前数据 ")],1),a("div",{staticClass:"clear-cache-box"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.cleanData}},[t._v("保存变更")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.dataCleanTask}},[t._v("立即清理")])],1)])])],1)],1)],1)},n=[],i=a("1da1"),r=a("d4ec"),c=a("bee2"),o=a("262e"),l=a("2caf"),u=(a("96cf"),a("9ab4")),h=a("8c73"),d=a("60a3"),g=a("73ec"),v=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.reflashFlag=!1,t.healthData={dongtai_openapi:{status:0},dongtai_engine:{status:0},oss:{status:0},engine_monitoring_indicators:[]},t.cache=1,t.cacheIo=!1,t.cacheTime="00:00",t}return Object(c["a"])(a,[{key:"cacheTimeChange",value:function(t){console.log(t)}},{key:"getHealth",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadingStart(),t.next=3,this.services.setting.health();case 3:if(e=t.sent,this.loadingDone(),201===e.status){t.next=8;break}return this.$message.error(e.msg),t.abrupt("return");case 8:this.healthData=e.data;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"reflash",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadingStart(),t.next=3,this.services.setting.ossHealth();case 3:if(e=t.sent,this.loadingDone(),201===e.status){t.next=8;break}return this.$message.error(e.msg),t.abrupt("return");case 8:this.healthData.oss=e.data.oss;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"cleanData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadingStart(),e={clean_time:this.cacheTime,days_before:this.cache,enable:this.cacheIo},t.next=4,this.services.setting.dataClean(e);case 4:if(a=t.sent,this.loadingDone(),201===a.status){t.next=9;break}return this.$message.error(a.msg),t.abrupt("return");case 9:this.$message.success("变更成功");case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getClineData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadingStart(),e={},t.next=4,this.services.setting.getDataClean(e);case 4:if(a=t.sent,this.loadingDone(),201===a.status){t.next=9;break}return this.$message.error(a.msg),t.abrupt("return");case 9:this.cache=a.data.days_before,this.cacheTime=a.data.clean_time,this.cacheIo=a.data.enable;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"dataCleanTask",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadingStart(),e={days_before:this.cache},t.next=4,this.services.setting.dataCleanTask(e);case 4:if(a=t.sent,this.loadingDone(),201===a.status){t.next=9;break}return this.$message.error(a.msg),t.abrupt("return");case 9:this.$message.success("清理成功");case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){this.getHealth(),this.getClineData()}}]),a}(h["a"]);v=Object(u["b"])([Object(d["a"])({name:"StatusMonitoring",filters:{formatTimestamp:function(t){return Object(g["a"])(t)}}})],v);var p=v,m=p,f=(a("9cd4"),a("2877")),b=Object(f["a"])(m,s,n,!1,null,"2ad13dbd",null);e["default"]=b.exports},"01e0":function(t,e,a){},"9cd4":function(t,e,a){"use strict";a("01e0")}}]);
//# sourceMappingURL=chunk-0553945d.f42b36da.js.map