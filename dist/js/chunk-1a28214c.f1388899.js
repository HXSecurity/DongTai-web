(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a28214c"],{"06be":function(e,t,a){},"5a65":function(e,t,a){"use strict";a("06be")},7035:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"strategy"},[a("el-page-header",{staticClass:"header",on:{back:e.goBack}}),a("div",{staticClass:"title"},[e._v(" "+e._s(e.$route.query.view?e.$t("views.strategyManage.viewTitle"):e.dialogForm.id?e.$t("views.strategyManage.editTitle"):e.$t("views.strategyManage.addTitle"))+" ")]),a("el-form",{ref:"ruleForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":"en"===e.$i18n.locale?"120px":"80px"}},[a("el-form-item",{attrs:{label:e.$t("views.strategyManage.name"),prop:"vul_name"}},[e.$route.query.view?a("div",[e._v(" "+e._s(e.dialogForm.vul_name)+" ")]):a("el-input",{model:{value:e.dialogForm.vul_name,callback:function(t){e.$set(e.dialogForm,"vul_name",t)},expression:"dialogForm.vul_name"}})],1),a("el-form-item",{staticStyle:{position:"relative"},attrs:{label:e.$t("views.strategyManage.detail"),prop:"vul_desc"}},[e.$route.query.view?a("div",[a("MyMarkdownIt",{staticStyle:{color:"#747c8c"},attrs:{content:e.dialogForm.vul_desc}})],1):a("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:4,maxRows:4}},model:{value:e.dialogForm.vul_desc,callback:function(t){e.$set(e.dialogForm,"vul_desc",t)},expression:"dialogForm.vul_desc"}}),e.$route.query.view?e._e():a("el-button",{staticClass:"btn test-btn",attrs:{icon:"el-icon-view",size:"small"},on:{click:function(t){return e.preview(e.dialogForm.vul_desc)}}},[e._v(e._s(e.$t("views.strategyManage.view")))])],1),a("el-form-item",{staticStyle:{position:"relative"},attrs:{label:e.$t("views.strategyManage.fix"),prop:"fix"}},[e.$route.query.view?a("div",[a("MyMarkdownIt",{staticStyle:{color:"#747c8c"},attrs:{content:e.dialogForm.vul_fix||e.$t("views.strategyManage.no")}})],1):a("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:4,maxRows:4}},model:{value:e.dialogForm.vul_fix,callback:function(t){e.$set(e.dialogForm,"vul_fix",t)},expression:"dialogForm.vul_fix"}}),e.$route.query.view?e._e():a("el-button",{staticClass:"btn test-btn",attrs:{icon:"el-icon-view",size:"small"},on:{click:function(t){return e.preview(e.dialogForm.vul_fix)}}},[e._v(e._s(e.$t("views.strategyManage.view")))])],1),a("el-form-item",{attrs:{label:e.$t("views.strategyManage.level"),prop:"level_id"}},[e.$route.query.view?a("div",[e._v(" "+e._s(e.vul_levels_map[e.dialogForm.level_id])+" ")]):a("el-select",{model:{value:e.dialogForm.level_id,callback:function(t){e.$set(e.dialogForm,"level_id",t)},expression:"dialogForm.level_id"}},e._l(e.vul_levels,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name_value,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("views.strategyManage.status")}},[e.$route.query.view?a("div",[e._v(" "+e._s("enable"===e.dialogForm.state?e.$t("views.hookPage.on"):e.$t("views.hookPage.off"))+" ")]):a("el-switch",{attrs:{"active-value":"enable","inactive-value":"disable"},model:{value:e.dialogForm.state,callback:function(t){e.$set(e.dialogForm,"state",t)},expression:"dialogForm.state"}})],1)],1),e.$route.query.view?e._e():a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"submit btn",attrs:{type:"small"},on:{click:e.dialogEnter}},[e._v(" "+e._s(e.$t("views.projectEdit.save"))+" ")])],1),a("el-dialog",{attrs:{title:e.$t("views.strategyManage.view"),visible:e.viewDialog,"show-close":!1},on:{"update:visible":function(t){e.viewDialog=t}}},[a("div",[a("MyMarkdownIt",{staticStyle:{color:"#747c8c"},attrs:{content:e.previewData}})],1),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"submit btn",attrs:{type:"small"},on:{click:function(t){e.viewDialog=!1,e.previewData=""}}},[e._v(" "+e._s(e.$t("views.strategyManage.enter"))+" ")])],1)])],1)},r=[],s=a("1da1"),n=a("d4ec"),l=a("bee2"),o=a("262e"),u=a("2caf"),c=(a("d3b7"),a("159b"),a("96cf"),a("9ab4")),v=a("8c73"),g=a("60a3"),d=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.viewDialog=!1,e.previewData="",e.vul_levels=[],e.vul_levels_map={},e.dialogForm={vul_name:"",vul_type:"",state:"",vul_desc:"",level_id:void 0,vul_fix:""},e.rules={vul_name:[{required:!0,message:e.$t("views.strategyManage.notnull"),trigger:"blur"}],vul_desc:[{required:!0,message:e.$t("views.strategyManage.notnull"),trigger:"blur"}],level_id:[{required:!0,message:e.$t("views.strategyManage.notnull"),trigger:"blur"}]},e}return Object(l["a"])(a,[{key:"preview",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.viewDialog=!0,this.previewData=t;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getVulLevels",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingStart(),e.next=3,this.services.setting.vul_levels();case 3:t=e.sent,this.loadingDone(),201===t.status?(this.vul_levels=t.data,this.vul_levels.forEach((function(e){a.$set(a.vul_levels_map,e.id,e.name_value)}))):this.$message.error(t.msg);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getVulLevels();case 2:if(!this.$route.query.id){e.next=5;break}return e.next=5,this.getStrategy();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getStrategy",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.setting.getStrategy(this.$route.query.id);case 2:t=e.sent,201===t.status?this.dialogForm=t.data:this.$message.error(t.msg);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"dialogEnter",value:function(){var e=this,t=this.$refs.ruleForm;t.validate((function(t){t&&(e.$route.query.id?e.editStrategyApi():e.addStrategyApi())}))}},{key:"goBack",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push({name:"strategyManage"});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addStrategyApi",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.setting.addManage({vul_name:this.dialogForm.vul_name,vul_desc:this.dialogForm.vul_desc,vul_fix:this.dialogForm.vul_fix,vul_type:this.dialogForm.vul_name,level_id:this.dialogForm.level_id,state:this.dialogForm.state});case 2:t=e.sent,a=t.status,i=t.msg,201===a?(this.$message.success(i),this.goBack()):this.$message.error(i);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"editStrategyApi",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingStart(),e.next=3,this.services.setting.updateManage(this.dialogForm.id,{vul_name:this.dialogForm.vul_name,vul_desc:this.dialogForm.vul_desc,vul_fix:this.dialogForm.vul_fix,vul_type:this.dialogForm.vul_name,level_id:this.dialogForm.level_id,state:this.dialogForm.state});case 3:t=e.sent,a=t.status,i=t.msg,this.loadingDone(),201===a?(this.$message.success(i),this.goBack()):this.$message.error(i);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"userInfo",get:function(){return this.$store.getters.userInfo}}]),a}(v["a"]);d=Object(c["b"])([Object(g["a"])({name:"Strategy"})],d);var m=d,p=m,h=(a("5a65"),a("2877")),_=Object(h["a"])(p,i,r,!1,null,"18735303",null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-1a28214c.f1388899.js.map