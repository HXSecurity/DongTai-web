(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a4f4bbb"],{"1e48":function(e,t,r){"use strict";r("5fb3")},"3b74":function(e,t,r){"use strict";function s(e){return e instanceof RegExp}function a(e){return e&&"[object Function]"==={}.toString.call(e)}function n(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e}function i(e){return"undefined"===typeof e}t.__esModule=!0,t.isUndefined=t.isPlainObject=t.isFunction=t.isRegex=void 0,t.isRegex=s,t.isFunction=a,t.isPlainObject=n,t.isUndefined=i},"419e":function(e,t,r){"use strict";var s=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,n=r.call(e),i=[];try{while((void 0===t||t-- >0)&&!(s=n.next()).done)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n["return"])&&r.call(n)}finally{if(a)throw a.error}}return i},a=this&&this.__spreadArray||function(e,t){for(var r=0,s=t.length,a=e.length;r<s;r++,a++)e[a]=t[r];return e};function n(e,t,r){var n=new Set(t);return function(t,i,o){return o===e&&Array.from(a(a([],s(t)),s(i)).map((function(e){return{key:r(e),value:e}})).map((function(e){var t=e.key,r=e.value;return{key:n.has(t)?t:r,value:r}})).reduce((function(e,t){var r=t.key,s=t.value;return e["delete"](r),e.set(r,s)}),new Map).values())}}t.__esModule=!0,t["default"]=n},"4f77":function(e,t,r){"use strict";r("ed42")},"52f6":function(e,t,r){"use strict";(function(t){
/*!
 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
const s=Symbol.prototype.valueOf,a=r("ef5d");function n(e,t){switch(a(e)){case"array":return e.slice();case"object":return Object.assign({},e);case"date":return new e.constructor(Number(e));case"map":return new Map(e);case"set":return new Set(e);case"buffer":return l(e);case"symbol":return u(e);case"arraybuffer":return o(e);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return c(e);case"regexp":return i(e);case"error":return Object.create(e);default:return e}}function i(e){const t=void 0!==e.flags?e.flags:/\w+$/.exec(e)||void 0,r=new e.constructor(e.source,t);return r.lastIndex=e.lastIndex,r}function o(e){const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}function c(e,t){return new e.constructor(e.buffer,e.byteOffset,e.length)}function l(e){const r=e.length,s=t.allocUnsafe?t.allocUnsafe(r):t.from(r);return e.copy(s),s}function u(e){return s?Object(s.call(e)):{}}e.exports=n}).call(this,r("b639").Buffer)},"5fb3":function(e,t,r){},"6f71":function(e,t,r){"use strict";var s=/(\*|\?)/g;function a(e,t){this.text=e=e||"",this.hasWild=e.indexOf("*")>=0,this.separator=t,this.parts=e.split(t).map(this.classifyPart.bind(this))}a.prototype.match=function(e){var t,r,s=!0,a=this.parts,n=a.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(r=(e||"").split(this.separator),t=0;s&&t<n;t++)"*"!==a[t]&&(s=t<r.length&&(a[t]instanceof RegExp?a[t].test(r[t]):a[t]===r[t]));s=s&&r}else s=!1;else if("function"==typeof e.splice)for(s=[],t=e.length;t--;)this.match(e[t])&&(s[s.length]=e[t]);else if("object"==typeof e)for(var i in s={},e)this.match(i)&&(s[i]=e[i]);return s},a.prototype.classifyPart=function(e){return"*"===e?e:e.indexOf("*")>=0||e.indexOf("?")>=0?new RegExp(e.replace(s,".$1")):e},e.exports=function(e,t,r){var s=new a(e,r||/[\/\.]/);return"undefined"!=typeof t?s.match(t):s}},7676:function(e,t,r){"use strict";var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var a in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},a=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,n=r.call(e),i=[];try{while((void 0===t||t-- >0)&&!(s=n.next()).done)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n["return"])&&r.call(n)}finally{if(a)throw a.error}}return i},n=this&&this.__spreadArray||function(e,t){for(var r=0,s=t.length,a=e.length;r<s;r++,a++)e[a]=t[r];return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.unique=t.mergeWithRules=t.mergeWithCustomize=t["default"]=t.merge=t.CustomizeRule=t.customizeObject=t.customizeArray=void 0;var o=i(r("6f71")),c=i(r("d540")),l=i(r("c4d8")),u=i(r("419e"));t.unique=u["default"];var p=r("8a52");t.CustomizeRule=p.CustomizeRule;var d=r("3b74");function h(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return v({}).apply(void 0,n([e],a(t)))}function v(e){return function(t){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];if(d.isUndefined(t)||r.some(d.isUndefined))throw new TypeError("Merging undefined is not supported");if(t.then)throw new TypeError("Promises are not supported");if(!t)return{};if(0===r.length){if(Array.isArray(t)){if(0===t.length)return{};if(t.some(d.isUndefined))throw new TypeError("Merging undefined is not supported");if(t[0].then)throw new TypeError("Promises are not supported");return c["default"](t,l["default"](e))}return t}return c["default"]([t].concat(r),l["default"](e))}}function f(e){return function(t,r,s){var i=Object.keys(e).find((function(e){return o["default"](e,s)}))||"";if(i)switch(e[i]){case p.CustomizeRule.Prepend:return n(n([],a(r)),a(t));case p.CustomizeRule.Replace:return r;case p.CustomizeRule.Append:default:return n(n([],a(t)),a(r))}}}function m(e){return v({customizeArray:function(t,r,s){var a=e;return s.split(".").forEach((function(e){a&&(a=a[e])})),d.isPlainObject(a)?y({currentRule:a,a:t,b:r}):"string"===typeof a?g({currentRule:a,a:t,b:r}):void 0}})}t.merge=h,t["default"]=h,t.mergeWithCustomize=v,t.customizeArray=f,t.mergeWithRules=m;var b=Array.isArray;function y(e){var t=e.currentRule,r=e.a,i=e.b;if(!b(r))return r;var o=[],c=r.map((function(e){if(!d.isPlainObject(t))return e;var r={},c=[],l={};Object.entries(t).forEach((function(e){var t=a(e,2),r=t[0],s=t[1];s===p.CustomizeRule.Match?c.push(r):l[r]=s}));var u=i.filter((function(t){var r=c.every((function(r){var s,a;return(null===(s=e[r])||void 0===s?void 0:s.toString())===(null===(a=t[r])||void 0===a?void 0:a.toString())}));return r&&o.push(t),r}));return d.isPlainObject(e)?(Object.entries(e).forEach((function(e){var i=a(e,2),o=i[0],c=i[1],h=t;switch(t[o]){case p.CustomizeRule.Match:r[o]=c,Object.entries(h).forEach((function(e){var t=a(e,2),s=t[0],n=t[1];if(n===p.CustomizeRule.Replace&&u.length>0){var i=_(u)[s];"undefined"!==typeof i&&(r[s]=i)}}));break;case p.CustomizeRule.Append:if(!u.length){r[o]=c;break}var v=_(u)[o];if(!b(c)||!b(v))throw new TypeError("Trying to append non-arrays");r[o]=c.concat(v);break;case p.CustomizeRule.Merge:if(!u.length){r[o]=c;break}var f=_(u)[o];if(!d.isPlainObject(c)||!d.isPlainObject(f))throw new TypeError("Trying to merge non-objects");r[o]=s(s({},c),f);break;case p.CustomizeRule.Prepend:if(!u.length){r[o]=c;break}var m=_(u)[o];if(!b(c)||!b(m))throw new TypeError("Trying to prepend non-arrays");r[o]=m.concat(c);break;case p.CustomizeRule.Replace:r[o]=u.length>0?_(u)[o]:c;break;default:var g=l[o],j=u.map((function(e){return e[o]})).reduce((function(e,t){return b(e)&&b(t)?n(n([],a(e)),a(t)):e}),[]);r[o]=y({currentRule:g,a:c,b:j});break}})),r):e}));return c.concat(i.filter((function(e){return!o.includes(e)})))}function g(e){var t=e.currentRule,r=e.a,s=e.b;switch(t){case p.CustomizeRule.Append:return r.concat(s);case p.CustomizeRule.Prepend:return s.concat(r);case p.CustomizeRule.Replace:return s}return r}function _(e){return e[e.length-1]}function j(e){return function(t,r,s){switch(e[s]){case p.CustomizeRule.Prepend:return c["default"]([r,t],l["default"]());case p.CustomizeRule.Replace:return r;case p.CustomizeRule.Append:return c["default"]([t,r],l["default"]())}}}t.customizeObject=j},"795e":function(e,t,r){"use strict";r("d2d7")},"8a52":function(e,t,r){"use strict";t.__esModule=!0,t.CustomizeRule=void 0,function(e){e["Match"]="match",e["Merge"]="merge",e["Append"]="append",e["Prepend"]="prepend",e["Replace"]="replace"}(t.CustomizeRule||(t.CustomizeRule={}))},9675:function(e,t,r){"use strict";const s=r("52f6"),a=r("ef5d"),n=r("fb48");function i(e,t){switch(a(e)){case"object":return o(e,t);case"array":return c(e,t);default:return s(e)}}function o(e,t){if("function"===typeof t)return t(e);if(t||n(e)){const r=new e.constructor;for(let s in e)r[s]=i(e[s],t);return r}return e}function c(e,t){const r=new e.constructor(e.length);for(let s=0;s<e.length;s++)r[s]=i(e[s],t);return r}e.exports=i},a832:function(e,t,r){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},c4d8:function(e,t,r){"use strict";var s=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,n=r.call(e),i=[];try{while((void 0===t||t-- >0)&&!(s=n.next()).done)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n["return"])&&r.call(n)}finally{if(a)throw a.error}}return i},a=this&&this.__spreadArray||function(e,t){for(var r=0,s=t.length,a=e.length;r<s;r++,a++)e[a]=t[r];return e},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var i=n(r("9675")),o=n(r("d540")),c=r("3b74"),l=Array.isArray;function u(e){var t=void 0===e?{}:e,r=t.customizeArray,n=t.customizeObject,p=t.key;return function e(t,d,h){var v=p?p+"."+h:h;if(c.isFunction(t)&&c.isFunction(d))return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e(t.apply(void 0,a([],s(r))),d.apply(void 0,a([],s(r))),h)};if(l(t)&&l(d)){var f=r&&r(t,d,v);return f||a(a([],s(t)),s(d))}if(c.isRegex(d))return d;if(c.isPlainObject(t)&&c.isPlainObject(d)){f=n&&n(t,d,v);return f||o["default"]([t,d],u({customizeArray:r,customizeObject:n,key:v}))}return c.isPlainObject(d)?i["default"](d):l(d)?a([],s(d)):d}}t["default"]=u},d2d7:function(e,t,r){},d540:function(e,t,r){"use strict";var s=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,n=r.call(e),i=[];try{while((void 0===t||t-- >0)&&!(s=n.next()).done)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n["return"])&&r.call(n)}finally{if(a)throw a.error}}return i};function a(e,t){var r=s(e),a=r[0],i=r.slice(1),o=a;return i.forEach((function(e){o=n(o,e,t)})),o}function n(e,t,r){var s={};return Object.keys(e).concat(Object.keys(t)).forEach((function(a){var n=r(e[a],t[a],a);s[a]="undefined"===typeof n?e[a]:n})),s}t.__esModule=!0,t["default"]=a},ed42:function(e,t,r){},ef5d:function(e,t){var r=Object.prototype.toString;function s(e){return"function"===typeof e.constructor?e.constructor.name:null}function a(e){return Array.isArray?Array.isArray(e):e instanceof Array}function n(e){return e instanceof Error||"string"===typeof e.message&&e.constructor&&"number"===typeof e.constructor.stackTraceLimit}function i(e){return e instanceof Date||"function"===typeof e.toDateString&&"function"===typeof e.getDate&&"function"===typeof e.setDate}function o(e){return e instanceof RegExp||"string"===typeof e.flags&&"boolean"===typeof e.ignoreCase&&"boolean"===typeof e.multiline&&"boolean"===typeof e.global}function c(e,t){return"GeneratorFunction"===s(e)}function l(e){return"function"===typeof e.throw&&"function"===typeof e.return&&"function"===typeof e.next}function u(e){try{if("number"===typeof e.length&&"function"===typeof e.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}function p(e){return!(!e.constructor||"function"!==typeof e.constructor.isBuffer)&&e.constructor.isBuffer(e)}e.exports=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;if("boolean"===t)return"boolean";if("string"===t)return"string";if("number"===t)return"number";if("symbol"===t)return"symbol";if("function"===t)return c(e)?"generatorfunction":"function";if(a(e))return"array";if(p(e))return"buffer";if(u(e))return"arguments";if(i(e))return"date";if(n(e))return"error";if(o(e))return"regexp";switch(s(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(l(e))return"generator";switch(t=r.call(e),t){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")}},f6d1:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"container"},[e.projectObj?r("div",{staticClass:"project-warp"},[r("div",{staticClass:"back"},[r("span",{on:{click:e.goProjectList}},[r("i",{staticClass:"el-icon-arrow-left"}),e._v("返回列表 ")])]),r("div",{staticClass:"title-warp"},[r("div",{staticClass:"title-top flex-row-space-between"},[r("div",{staticClass:"name"},[e._v(" "+e._s(e.projectObj.name)+" "),e._l(e.projectObj.agent_language,(function(t){return r("el-tag",{key:t,staticStyle:{"margin-left":"12px"},attrs:{size:"small",type:e.getTagColoe(t)}},[e._v(e._s(t))])}))],2),r("div",{staticClass:"operate"},[r("el-button",{staticClass:"operateBtn",attrs:{type:"text"},on:{click:function(t){return e.$router.push("/project/projectEdit/"+e.$route.params.pid)}}},[r("i",{staticClass:"iconfont iconshezhi-2"})])],1)]),r("div",{staticClass:"info-line flex-row-space-between"},[r("div",{staticClass:"info"},[r("i",{staticClass:"iconfont iconjiance-copy"}),e._v(" "+e._s(e.$t("views.projectDetail.mode"))+" "),r("i",{staticClass:"mode"},[e._v(" "+e._s(e.projectObj.mode)+" ")]),r("i",{staticClass:"iconfont icongerenzhongxin",staticStyle:{"font-size":"14px"}}),e._v(" "+e._s(e.$t("views.projectDetail.owner"))+" "),r("span",{staticStyle:{"margin-right":"40px"}},[e._v(" "+e._s(e.projectObj.owner))]),r("i",{staticClass:"iconfont iconshijian00"}),e._v(" "+e._s(e.$t("views.projectDetail.latest_time"))+" "),r("i",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.projectObj.latest_time))]),r("i",{staticClass:"iconfont iconicon_details_banben"}),e._v(" "+e._s(e.$t("views.projectDetail.version"))+" "),r("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini"},on:{change:e.changeVersion},model:{value:e.projectObj.versionData.version_id,callback:function(t){e.$set(e.projectObj.versionData,"version_id",t)},expression:"projectObj.versionData.version_id"}},e._l(e.versionList,(function(t){return r("el-option",{key:t.version_id,attrs:{value:t.version_id,label:t.version_name}},[e._v(" "+e._s(t.version_name)+" ")])})),1),r("i",{staticClass:"iconfont iconicon_details_edit",staticStyle:{"margin-left":"12px",cursor:"pointer",color:"#4fb794"},on:{click:e.showVersion}})],1)])]),r("div",{staticClass:"projectVul flex-row-space-between"},[r("el-button",{staticClass:"pTab",class:"desc"===e.selectTab?"selected":"",attrs:{type:"text"},on:{click:function(t){return e.changeActive("desc")}}},[r("i",{staticClass:"iconfont iconshuju1"}),e._v(" "+e._s(e.$t("views.projectDetail.projectDesc"))+" ")]),r("el-button",{staticClass:"pTab",class:"vul"===e.selectTab?"selected":"",attrs:{type:"text"},on:{click:function(t){return e.changeActive("vul")}}},[r("i",{staticClass:"iconfont iconloudong"}),e._v(" "+e._s(e.$t("views.projectDetail.projectVul"))+" ")]),r("el-button",{staticClass:"pTab",class:"component"===e.selectTab?"selected":"",attrs:{type:"text"},on:{click:function(t){return e.changeActive("component")}}},[r("i",{staticClass:"el-icon-menu",staticStyle:{"line-height":"8px"}}),e._v(" "+e._s(e.$t("views.projectDetail.projectComponent"))+" ")]),e.showApiListFlag?r("el-button",{staticClass:"pTab",class:"apiList"===e.selectTab?"selected":"",attrs:{type:"text"},on:{click:function(t){return e.changeActive("apiList")}}},[r("i",{staticClass:"iconfont iconzhongjianjian",staticStyle:{"line-height":"8px"}}),e._v(" "+e._s(e.$t("views.projectDetail.apiList"))+" ")]):e._e()],1),e.projectObj.versionData.version_id?["desc"===e.selectTab?r("div",[r("div",{staticClass:"module flex-row-space-between",attrs:{id:"type_summary_level_count"}},[r("div",{staticClass:"module-content"},[r("div",{staticClass:"module-title"},[e._v(" "+e._s(e.$t("views.projectDetail.vulNum"))+" ")]),r("div",[e.projectObj.level_count?r("Distribution",{attrs:{height:312,data:e.projectObj.level_count}}):e._e()],1)]),r("div",{staticClass:"module-content"},[r("div",{staticClass:"module-title"},[e._v(" "+e._s(e.$t("views.projectDetail.type"))+" ")]),e.projectObj.type_summary?r("Type",{attrs:{height:312,data:e.projectObj.type_summary}}):e._e()],1)]),r("div",{staticClass:"module"},[r("div",{staticClass:"module-title"},[e._v(" "+e._s(e.$t("views.projectDetail.trend"))+" ")]),e.projectObj.day_num?r("Trend",{attrs:{data:e.projectObj.day_num}}):e._e()],1)]):e._e(),"vul"===e.selectTab?r("div",[r("vul-list-component",{ref:"vulListComponent",attrs:{"project-id":e.$route.params.pid,version:e.projectObj.versionData.version_id}})],1):e._e(),"component"===e.selectTab?r("div",[r("ScaList",{ref:"componentList",attrs:{"project-id":e.$route.params.pid,version:e.projectObj.versionData.version_id}})],1):e._e(),"apiList"===e.selectTab&&e.showApiListFlag?r("div",[r("ApiList",{ref:"apiList",attrs:{"project-id":e.$route.params.pid,"version-id":e.projectObj.versionData.version_id}})],1):e._e()]:e._e()],2):e._e(),r("el-dialog",{attrs:{title:e.$t("views.projectDetail.version_dialog"),visible:e.versionFlag,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.versionFlag=t}}},[r("div",{staticClass:"version-dialog-btn-list"},[r("el-tag",{attrs:{size:"small",effect:"plain"},on:{click:e.addVersion}},[r("i",{staticClass:"el-icon-plus"}),e._v(" "+e._s(e.$t("views.projectDetail.add_version"))+" ")])],1),r("el-table",{attrs:{border:"",data:e.versionList,"header-cell-style":{background:"#F1F8FF"},height:"350"}},[r("el-table-column",{attrs:{property:"version_name","min-width":"120px",label:e.$t("views.projectDetail.version_name")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?r("el-input",{attrs:{maxlength:"20",size:"small",placeholder:e.$t("views.projectDetail.search_version_name")},model:{value:t.row.version_name,callback:function(r){e.$set(t.row,"version_name",r)},expression:"scope.row.version_name"}}):r("div",[r("span",[e._v(e._s(t.row.version_name))]),1===t.row.current_version?r("el-tag",{staticStyle:{"margin-left":"22px"},attrs:{size:"small",effect:"plain"}},[e._v(" "+e._s(e.$t("views.projectDetail.current_version"))+" ")]):e._e()],1)]}}])}),r("el-table-column",{attrs:{"min-width":"200px",property:"description",label:e.$t("views.projectDetail.description")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?r("el-input",{attrs:{size:"small",placeholder:e.$t("views.projectDetail.search_description")},model:{value:t.row.description,callback:function(r){e.$set(t.row,"description",r)},expression:"scope.row.description"}}):r("span",[e._v(e._s(t.row.description))])]}}])}),r("el-table-column",{attrs:{"header-align":"right","min-width":"200px",label:e.$t("views.projectDetail.handle")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"btn-list"},[t.row.isEdit||1===t.row.current_version?e._e():r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.versionCurrent(t.row)}}},[e._v(e._s(e.$t("views.projectDetail.versionCurrent")))]),t.row.isEdit?e._e():r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.editVersion(t.row)}}},[e._v(e._s(e.$t("views.projectDetail.editVersion")))]),t.row.isEdit?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.enterVersion(t.row,t.$index)}}},[e._v(e._s(e.$t("views.projectDetail.enterVersion")))]):e._e(),t.row.isEdit?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.cancelVersion(t.row,t.$index)}}},[e._v(e._s(e.$t("views.projectDetail.cancelVersion")))]):e._e(),r("span",{staticStyle:{color:"#d8d8d8"}},[e._v("|")]),r("el-button",{staticStyle:{color:"#ea3838"},attrs:{type:"text",disabled:!t.row.version_id||1===t.row.current_version},on:{click:function(r){return e.deleteVersion(t.row,t.$index)}}},[e._v(e._s(e.$t("views.projectDetail.deleteVersion")))])],1)]}}])})],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.enterVersionDialog}},[e._v(e._s(e.$t("views.projectDetail.dialogEnterVersion")))])],1)],1)],1)},a=[],n=r("5530"),i=r("1da1"),o=r("d4ec"),c=r("bee2"),l=r("262e"),u=r("2caf"),p=(r("96cf"),r("d3b7"),r("159b"),r("ac1f"),r("5319"),r("a434"),r("b0c0"),r("9ab4")),d=r("8c73"),h=r("60a3"),v=r("73ec"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"flex-row-space-between"},[r("div",{staticClass:"slider-warp"},[r("div",{staticClass:"title flex-column-center",staticStyle:{height:"54px"}},[r("div",{staticClass:"flex-row-space-between"},[r("span",{staticClass:"filter-title"},[e._v("过滤器")]),r("el-button",{staticClass:"reset-btn",attrs:{type:"text"},on:{click:e.reset}},[r("span",[e._v("重置全部")])])],1)]),e.searchOptionsObj.level.length?r("div",{staticClass:"module-title flex-row-space-between"},[r("span",{staticClass:"filter-box-title"},[e._v(" 危险等级 ")])]):e._e(),e._l(e.searchOptionsObj.level,(function(t,s){return r("el-checkbox",{key:"level"+t.id+"-"+s,staticClass:"flex-row-space-between module-line",attrs:{label:t.id},on:{change:e.newSelectData},model:{value:e.searchObj.level_str,callback:function(t){e.$set(e.searchObj,"level_str",t)},expression:"searchObj.level_str"}},[r("div",{staticClass:"check-label"},[r("div",{staticClass:"selectOption"},[e._v(" "+e._s(t.name)+" ")]),r("div",{staticClass:"num"},[e._v(" "+e._s(t.num)+" ")])])])})),e.searchOptionsObj.projects.length?r("div",{staticClass:"module-title flex-row-space-between"},[r("span",{staticClass:"filter-box-title"},[e._v(" 关联项目 ")])]):e._e(),r("div",{staticClass:"obj-scroll"},e._l(e.searchOptionsObj.projects,(function(t,s){return r("el-checkbox",{key:"object"+t.id+"-"+s,staticClass:"flex-row-space-between module-line",attrs:{label:t.id},on:{change:e.newSelectData},model:{value:e.searchObj.project_str,callback:function(t){e.$set(e.searchObj,"project_str",t)},expression:"searchObj.project_str"}},[r("div",{staticClass:"check-label"},[r("div",{staticClass:"selectOption"},[e._v(" "+e._s(t.name)+" ")]),r("div",{staticClass:"num"},[e._v(" "+e._s(t.num)+" ")])])])})),1),"sca"===e.vulnType?[e.searchOptionsObj.availability.length?r("div",{staticClass:"module-title flex-row-space-between"},[r("span",{staticClass:"filter-box-title"},[e._v(" 可利用性 ")])]):e._e(),e._l(e.searchOptionsObj.availability,(function(t,s){return r("el-checkbox",{key:"availability"+t.id+"-"+s,staticClass:"flex-row-space-between module-line",attrs:{label:t.id},on:{change:e.newSelectData},model:{value:e.searchObj.availability_str,callback:function(t){e.$set(e.searchObj,"availability_str",t)},expression:"searchObj.availability_str"}},[r("div",{staticClass:"check-label"},[r("div",{staticClass:"selectOption"},[e._v(" "+e._s(t.name)+" ")]),r("div",{staticClass:"num"},[e._v(" "+e._s(t.num)+" ")])])])}))]:e._e(),"vuln"===e.vulnType?[e.searchOptionsObj.hook_type?r("div",{staticClass:"module-title flex-row-space-between"},[r("span",{staticClass:"filter-box-title"},[e._v(" 漏洞类型 ")])]):e._e(),e._l(e.searchOptionsObj.hook_type,(function(t,s){return r("el-checkbox",{key:"hook_type"+t.id+"-"+s,staticClass:"flex-row-space-between module-line",attrs:{label:t.id},on:{change:e.newSelectData},model:{value:e.searchObj.hook_type_str,callback:function(t){e.$set(e.searchObj,"hook_type_str",t)},expression:"searchObj.hook_type_str"}},[r("div",{staticClass:"check-label"},[r("div",{staticClass:"selectOption"},[e._v(" "+e._s(t.name)+" ")]),r("div",{staticClass:"num"},[e._v(" "+e._s(t.num)+" ")])])])})),e.searchOptionsObj.status?r("div",{staticClass:"module-title flex-row-space-between"},[r("span",{staticClass:"filter-box-title"},[e._v(" 漏洞状态 ")])]):e._e(),e._l(e.searchOptionsObj.status,(function(t,s){return r("el-checkbox",{key:"status"+t.id+"-"+s,staticClass:"flex-row-space-between module-line",attrs:{label:t.id},on:{change:e.newSelectData},model:{value:e.searchObj.status_str,callback:function(t){e.$set(e.searchObj,"status_str",t)},expression:"searchObj.status_str"}},[r("div",{staticClass:"check-label"},[r("div",{staticClass:"selectOption"},[e._v(" "+e._s(t.name)+" ")]),r("div",{staticClass:"num"},[e._v(" "+e._s(t.num)+" ")])])])}))]:e._e(),e.searchOptionsObj.language.length?r("div",{staticClass:"module-title flex-row-space-between"},[r("span",{staticClass:"filter-box-title"},[e._v(" 语言 ")])]):e._e(),e._l(e.searchOptionsObj.language,(function(t,s){return r("el-checkbox",{key:"language"+t.id+"-"+s,staticClass:"flex-row-space-between module-line",attrs:{label:t.id},on:{change:e.newSelectData},model:{value:e.searchObj.language_str,callback:function(t){e.$set(e.searchObj,"language_str",t)},expression:"searchObj.language_str"}},[r("div",{staticClass:"check-label"},[r("div",{staticClass:"selectOption"},[e._v(" "+e._s(t.name)+" ")]),r("div",{staticClass:"num"},[e._v(" "+e._s(t.num)+" ")])])])}))],2),r("div",{staticClass:"main-warp"},[r("div",{staticClass:"top-place-bar"}),r("div",{staticClass:"tool-box"},[r("div",{staticClass:"selectForm"},[r("div",{staticClass:"selectInput"},[r("el-input",{attrs:{size:"small",placeholder:"输入漏洞名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.newSelectData.apply(null,arguments)}},model:{value:e.searchObj.keywords,callback:function(t){e.$set(e.searchObj,"keywords",t)},expression:"searchObj.keywords"}},[r("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.newSelectData},slot:"suffix"})])],1),r("div",{staticClass:"sort-box"},[r("el-select",{staticClass:"commonSelect vulnSelect",staticStyle:{width:"150px","font-size":"14px"},attrs:{size:"small",placeholder:e.$t("views.vulnList.sort"),clearable:""},on:{change:e.newSelectData},model:{value:e.searchObj.order_type,callback:function(t){e.$set(e.searchObj,"order_type",t)},expression:"searchObj.order_type"}},e._l(e.searchOptionsObj.orderOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),null===e.searchObj.sort?r("i",{staticClass:"el-icon-sort sort-btn",on:{click:function(t){return e.sortSelect(!0)}}}):e._e(),!0===e.searchObj.sort?r("i",{staticClass:"el-icon-sort-up sort-btn",on:{click:function(t){return e.sortSelect(!1)}}}):e._e(),!1===e.searchObj.sort?r("i",{staticClass:"el-icon-sort-down sort-btn",on:{click:function(t){return e.sortSelect(null)}}}):e._e()],1)]),r("div",{staticClass:"select"},[r("div",{class:"vuln"===e.vulnType?"active":"",on:{click:function(t){return e.changeVulnType("vuln")}}},[e._v(" 应用漏洞 ")]),r("div",{class:"sca"===e.vulnType?"active":"",on:{click:function(t){return e.changeVulnType("sca")}}},[e._v(" 组件漏洞 ")])]),r("div",{staticClass:"checked-bar"},[r("div",[r("el-checkbox",{staticStyle:{"margin-right":"8px"},attrs:{value:e.tableData.length>0&&e.tableData.every((function(e){return e.checked}))},on:{change:e.selectAll}},[e._v("已筛选 "),r("span",{staticStyle:{color:"#1a80f2"}},[e._v(e._s(e.tableData.filter((function(e){return e.checked})).length))]),e._v(" 项")])],1),r("div",{staticClass:"top-tool-bar"},["vuln"===e.vulnType?r("el-select",{staticStyle:{width:"104px"},attrs:{size:"small",placeholder:"状态变更",clearable:""},on:{change:e.changeStatus},model:{value:e.statusSelect,callback:function(t){e.statusSelect=t},expression:"statusSelect"}},e._l(e.searchOptionsObj.statusOptions,(function(e){return r("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1):e._e(),"vuln"===e.vulnType?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"漏洞验证",placement:"top"}},[r("div",{staticClass:"checkedAllBtn",on:{click:function(t){return e.recheck("project")}}},[r("i",{staticClass:"icon iconfont"},[e._v("")])])]):e._e(),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[r("div",{staticClass:"checkedAllBtn",on:{click:function(t){return e.deleteVul()}}},[r("i",{staticClass:"icon iconfont"},[e._v("")])])])],1)])]),r("div",{staticClass:"tool-box-placeholder"}),e._l(e.tableData,(function(t){return r("div",{key:"card"+t.id},["vuln"===e.vulnType?r("VulnCard",{attrs:{item:t,"search-obj":e.searchObj,"setting-inte":e.settingInte,"get-table-data":e.getTableData}}):e._e(),"sca"===e.vulnType?r("ScaCard",{attrs:{item:t,"search-obj":e.searchObj,"setting-inte":e.settingInte,"get-table-data":e.getTableData}}):e._e()],1)}))],2)])},m=[],b=r("2909"),y=(r("4de4"),r("d81d"),r("4e82"),r("99af"),r("a15b"),r("07ac"),r("23d2")),g=r("e030"),_=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.inteRules={obj:[{required:!0,message:"请选择项目",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],type:[{required:!0,message:"请选择缺陷类型",trigger:"blur"}],level:[{required:!0,message:"请选择缺陷等级",trigger:"blur"}]},e.projectOtions=[],e.typeOptions=[],e.priorityOtions=[],e.settingInte=[],e.activeType="",e.pageInfo={},e.statusSelect="",e.vulnType="vuln",e.page=1,e.pageSize=20,e.dataEnd=!1,e.tableData=[],e.searchOptionsObj={level:[{name:"高危",num:0,id:1},{name:"中危",num:0,id:2},{name:"低危",num:0,id:3},{name:"无风险",num:0,id:4},{name:"提示",num:0,id:5}],status:[{name:"待验证",num:0,id:1},{name:"验证中",num:0,id:2},{name:"已确认",num:0,id:3},{name:"已忽略",num:0,id:4},{name:"已处理",num:0,id:5}],availability:[],hook_type:[],language:[{name:"JAVA",num:0,id:1},{name:"PYTHON",num:0,id:2},{name:"PHP",num:0,id:3},{name:"GO",num:0,id:4}],orderOptions:[{label:"漏洞级别",value:1},{label:"发现时间",value:2},{label:"最新活跃",value:3},{label:"状态",value:4}],statusOptions:[]},e.searchObj={level_str:[],project_str:[],order_type:"",keywords:"",status_str:[],source_type_str:[],availability_str:[],hook_type_str:[],language_str:[],sort:null},e.SummaryCatch={},e}return Object(c["a"])(r,[{key:"changeVulnType",value:function(e){this.vulnType=e,this.reset(),this.vulnSummary()}},{key:"changeStatus",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,s,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$nextTick((function(){a.statusSelect=""})),this.tableData.some((function(e){return e.checked}))){e.next=4;break}return this.$message({type:"warning",message:"请选择需要更改状态的漏洞",showClose:!0}),e.abrupt("return");case 4:return r=this.tableData.map((function(e){if(e.checked)return e.id})).filter((function(e){return e})),e.next=7,this.services.vuln.changeStatus({vul_ids:r,status_id:t});case 7:if(s=e.sent,201!==s.status){e.next=12;break}return this.$message.success(s.msg),this.newSelectData(),e.abrupt("return");case 12:this.$message.error(s.msg);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStatus",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.vuln.vulStatus();case 2:if(t=e.sent,201===t.status){e.next=6;break}return this.$message.error(t.msg),e.abrupt("return");case 6:this.searchOptionsObj.statusOptions=t.data.map((function(e){return{value:e.id,label:e.name}}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){this.searchObj={level_str:[],project_str:[],order_type:"",keywords:"",status_str:[],source_type_str:[],availability_str:[],hook_type_str:[],language_str:[],sort:null},this.newSelectData()}},{key:"created",value:function(){this.getStatus(),this.getTableData(),this.vulnSummary()}},{key:"querySearchAsync",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.setting.searchProject({name:t});case 2:s=e.sent,201===s.status&&(a=s.data.map((function(e){return{value:e.name,id:e.id}})),r(a));case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"sortSelect",value:function(e){this.searchObj.sort=e,this.newSelectData()}},{key:"deleteVul",value:function(e){var t=this;this.$confirm("该操作将会删除选中漏洞",this.$t("views.vulnList.recheckInfo"),{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s={},t.tableData.some((function(e){return e.checked}))){r.next=4;break}return t.$message({type:"warning",message:"请选择需要删除的漏洞",showClose:!0}),r.abrupt("return");case 4:return a=t.tableData.map((function(e){if(e.checked)return e.id})).filter((function(e){return e})),r.next=7,t.services.vuln.vulListDelete({source_type:"vuln"===t.vulnType?1:2,ids:String(a)});case 7:if(s=r.sent,201===s.status){r.next=12;break}t.$message({type:"error",message:s.msg,showClose:!0}),r.next=16;break;case 12:if(t.$message({type:"success",message:s.msg,showClose:!0}),"all"===e){r.next=16;break}return r.next=16,t.newSelectData();case 16:case"end":return r.stop()}}),r)}))))}},{key:"recheck",value:function(e){var t=this;this.$confirm("".concat(this.$t("views.vulnList.will")).concat("all"===e?this.$t("views.vulnList.all"):this.$t("views.vulnList.batch")).concat(this.$t("views.vulnList.recheckDesc")),this.$t("views.vulnList.recheckInfo"),{confirmButtonText:this.$t("views.vulnList.confirmButtonText"),cancelButtonText:this.$t("views.vulnList.cancelButtonText"),type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s={},"all"!==e){r.next=7;break}return r.next=4,t.services.vuln.vulRecheckAll({type:e});case 4:s=r.sent,r.next=14;break;case 7:if(t.tableData.some((function(e){return e.checked}))){r.next=10;break}return t.$message({type:"warning",message:t.$t("views.vulnList.chooseWarning"),showClose:!0}),r.abrupt("return");case 10:return a=t.tableData.map((function(e){if(e.checked)return e.id})).filter((function(e){return e})),r.next=13,t.services.vuln.recheck({ids:String(a)});case 13:s=r.sent;case 14:if(201===s.status){r.next=18;break}t.$message({type:"error",message:s.msg,showClose:!0}),r.next=22;break;case 18:if(t.$message({type:"success",message:s.msg,showClose:!0}),"all"===e){r.next=22;break}return r.next=22,t.newSelectData();case 22:case"end":return r.stop()}}),r)}))))}},{key:"selectAll",value:function(e){var t=this,r=this.tableData.length>0&&this.tableData.every((function(e){return e.checked}));r?this.tableData.forEach((function(e){return t.$set(e,"checked",!1)})):this.tableData.forEach((function(e){return t.$set(e,"checked",!0)})),console.log(e)}},{key:"newSelectData",value:function(){this.page=1,this.dataEnd=!1,this.tableData=[],this.getTableData()}},{key:"mounted",value:function(){window.addEventListener("scroll",this.myScroll)}},{key:"beforeDestroy",value:function(){window.removeEventListener("scroll",this.myScroll)}},{key:"myScroll",value:function(){var e=document.documentElement.scrollTop+window.innerHeight>document.documentElement.offsetHeight-1;e&&(this.dataEnd||(this.page+=1,this.getTableData()))}},{key:"getTableData",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,s,a,i,o,c,l,u,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]&&p[0],r=void 0,!0===this.searchObj.sort&&(r=1),!1===this.searchObj.sort&&(r=0),s={page:this.page,pageSize:this.pageSize,bind_project_id:this.projectId,project_version_id:String(this.version),level_id_str:this.searchObj.level_str.join(",")||void 0,project_id_str:this.searchObj.project_str.join(",")||void 0,order_type:this.searchObj.order_type||void 0,keywords:this.searchObj.keywords||void 0,status_id_str:this.searchObj.status_str.join(",")||void 0,source_type_str:this.searchObj.source_type_str.join(",")||void 0,availability_str:this.searchObj.availability_str.join(",")||void 0,hook_type_id_str:this.searchObj.hook_type_str.join(",")||void 0,language_str:this.searchObj.language_str.join(",")||void 0,order_type_desc:r,type:this.vulnType},this.loadingStart(),e.next=8,this.services.vuln.vulListContent(s);case 8:if(a=e.sent,i=a.status,o=a.data,c=a.msg,l=a.page,this.loadingDone(),201===i){e.next=17;break}return this.$message({type:"error",message:c,showClose:!0}),e.abrupt("return");case 17:u=o.messages.reduce((function(e,t){var r="";return t.vul_cve_nums&&(r="".concat(t.vul_cve_nums.cnnvd," | ").concat(t.vul_cve_nums.cnvd," | ").concat(t.vul_cve_nums.cve," | ").concat(t.vul_cve_nums.cwe)),e.push(Object(n["a"])(Object(n["a"])({},t),{},{first_time:Object(v["a"])(t.first_time),latest_time:Object(v["b"])(t.latest_time),vul_number:r,id:t.id})),e}),[]),u.length<20&&(this.dataEnd=!0),t&&(this.tableData=[]),this.pageInfo=l,this.tableData=[].concat(Object(b["a"])(this.tableData),Object(b["a"])(u));case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"vulnSummary",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.searchOptionsObj.level=[],this.searchOptionsObj.availability=[],this.searchOptionsObj.hook_type=[],this.searchOptionsObj.language=[],this.searchOptionsObj.status=[],this.searchOptionsObj.projects=[],"vuln"===this.vulnType?this.searchOptionsObj.orderOptions=[{label:"漏洞级别",value:1},{label:"发现时间",value:2},{label:"最新活跃",value:3},{label:"状态",value:4}]:this.searchOptionsObj.orderOptions=[{label:"漏洞级别",value:1},{label:"发现时间",value:2},{label:"最新活跃",value:3}],t={bind_project_id:this.projectId,project_version_id:String(this.version),type:this.vulnType},this.loadingStart(),!this.SummaryCatch[this.vulnType+"version:"+this.version]){e.next=13;break}r=this.SummaryCatch[this.vulnType+"version:"+this.version],e.next=16;break;case 13:return e.next=15,this.services.vuln.vulSummaryNum(t);case 15:r=e.sent;case 16:if(this.loadingDone(),201===r.status){e.next=20;break}return this.$message.error(r.msg),e.abrupt("return");case 20:this.SummaryCatch[this.vulnType]=r,s=Object.values(r.data.messages.availability||{}),this.searchOptionsObj.level=r.data.messages.level&&r.data.messages.level.length?r.data.messages.level:[{name:"高危",num:0,id:1},{name:"中危",num:0,id:2},{name:"低危",num:0,id:3},{name:"无风险",num:0,id:4},{name:"提示",num:0,id:5}],this.searchOptionsObj.status=r.data.messages.status&&r.data.messages.status.length?r.data.messages.status:[{name:"待验证",num:0,id:1},{name:"验证中",num:0,id:2},{name:"已确认",num:0,id:3},{name:"已忽略",num:0,id:4},{name:"已处理",num:0,id:5}],this.searchOptionsObj.availability=s&&s.length?s:this.searchOptionsObj.availability,this.searchOptionsObj.hook_type=r.data.messages.hook_type&&r.data.messages.hook_type.length?r.data.messages.hook_type:this.searchOptionsObj.hook_type,this.searchOptionsObj.language=r.data.messages.language&&r.data.messages.language.length?r.data.messages.language:[{name:"JAVA",num:0,id:1},{name:"PYTHON",num:0,id:2},{name:"PHP",num:0,id:3},{name:"GO",num:0,id:4}],this.searchOptionsObj.projects=r.data.messages.project&&r.data.messages.project.length?r.data.messages.project:this.searchOptionsObj.projects;case 28:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),r}(d["a"]);Object(p["b"])([Object(h["c"])()],_.prototype,"version",void 0),Object(p["b"])([Object(h["c"])()],_.prototype,"projectId",void 0),_=Object(p["b"])([Object(h["a"])({name:"VulListComponent",components:{VulnCard:y["a"],ScaCard:g["a"]}})],_);var j=_,w=j,O=(r("1e48"),r("2877")),k=Object(O["a"])(w,f,m,!1,null,"3f5ba63c",null),x=k.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"apiList"},[r("div",{staticClass:"selectForm"},[r("div",[r("el-select",{staticClass:"commonSelect",staticStyle:{width:"160px","font-size":"14px"},attrs:{placeholder:e.$t("views.apiList.methodPlaceHolder"),clearable:""},on:{change:e.searchChange},model:{value:e.searchObj.method,callback:function(t){e.$set(e.searchObj,"method",t)},expression:"searchObj.method"}},[r("el-option",{attrs:{label:"GET",value:"GET"}}),r("el-option",{attrs:{label:"POST",value:"POST"}}),r("el-option",{attrs:{label:"PUT",value:"PUT"}}),r("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1),r("el-select",{staticClass:"commonSelect",staticStyle:{"margin-left":"10px",width:"160px","font-size":"14px"},attrs:{placeholder:e.$t("views.apiList.statusPlaceHolder"),clearable:""},on:{change:e.searchChange},model:{value:e.searchObj.status,callback:function(t){e.$set(e.searchObj,"status",t)},expression:"searchObj.status"}},[r("el-option",{attrs:{label:e.$t("views.apiList.unlimited"),value:void 0}}),r("el-option",{attrs:{label:e.$t("views.apiList.covered"),value:1}}),r("el-option",{attrs:{label:e.$t("views.apiList.uncovered"),value:0}})],1),r("el-input",{staticClass:"commonInput",staticStyle:{"margin-left":"10px",width:"312px"},attrs:{placeholder:e.$t("views.apiList.searchPlaceHolder")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchChange.apply(null,arguments)}},model:{value:e.searchObj.url,callback:function(t){e.$set(e.searchObj,"url",t)},expression:"searchObj.url"}},[r("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchChange},slot:"suffix"})])],1),r("div",{staticStyle:{"margin-right":"20px"}},[r("span",[e._v(" "+e._s(e.$t("views.apiList.rate"))+" ")]),r("span",[e._v(" "+e._s(e.coverRate)+" ")])])]),r("div",{staticClass:"infoList"},[r("el-collapse",{model:{value:e.openCollapse,callback:function(t){e.openCollapse=t},expression:"openCollapse"}},e._l(e.apiList,(function(t,s){return r("el-collapse-item",{key:t.id,style:{borderColor:e.getColor(t.method).borderColor},attrs:{name:s}},[r("template",{slot:"title"},[r("div",{staticClass:"collapse-title",style:{backgroundColor:e.getColor(t.method).bgColor}},[r("el-tag",{staticClass:"tag",class:e.getType(t.method),attrs:{effect:"dark"}},[e._v(" "+e._s(t.method)+" ")]),r("span",{staticClass:"title-api-path"},[e._v(" "+e._s(t.path)+" ")]),r("span",[r("span",{staticClass:"title-api-info"},[e._v(" "+e._s(t.description)+" ")]),t.is_cover?r("i",{staticClass:"el-icon-success",staticStyle:{color:"#65d6a6","margin-right":"16px"}}):e._e()]),e._l(t.vulnerablities,(function(t,s){return r("el-tag",{key:s,staticClass:"danger-tag",style:1===t.level_id?{background:"#EA7171",borderColor:"#EA7171"}:2===t.level_id?{background:"#F39D0A",borderColor:"#F39D0A"}:3===t.level_id?{background:"#2E8FE9",borderColor:"#2E8FE9"}:4===t.level_id?{background:"#7BC1AB",borderColor:"#7BC1AB"}:{background:"#EA7171",borderColor:"#EA7171"},attrs:{size:"small"}},[e._v(" "+e._s(t.hook_type_name)+" ")])}))],2)]),r("div",[r("div",{staticClass:"table-toolbar"},[r("span",[e._v(" "+e._s(e.$t("views.apiList.parameters"))+" ")]),r("div",[t.is_cover?r("el-button",{attrs:{size:"small"},on:{click:function(r){return e.startView(t)}}},[e._v(" "+e._s(e.$t("views.apiList.view")))]):r("el-button",{attrs:{size:"small"},on:{click:function(r){return e.startSend(t)}}},[e._v(" "+e._s(e.$t("views.apiList.send")))])],1)]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.parameters}},[r("el-table-column",{attrs:{prop:"name",label:e.$t("views.apiList.name"),width:"180"}}),r("el-table-column",{attrs:{prop:"parameter_type",label:e.$t("views.apiList.type"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"light",content:t.row.parameter_type,placement:"top"}},[r("span",[e._v(" "+e._s(t.row.parameter_type_shortcut)+" ")])])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"annotation",label:e.$t("views.apiList.extra"),"min-width":"180"}})],1),r("div",{staticClass:"table-foot"},[r("span",{staticClass:"res"},[e._v(" "+e._s(e.$t("views.apiList.response"))+" ")]),r("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.return_type,placement:"top"}},[r("span",[e._v(" "+e._s(t.return_type_shortcut)+" ")])])],1),t.showSend?r("SearchCard",{staticStyle:{"margin-top":"20px"},attrs:{"is-api":!0,info:{method_pools:{id:t.poolId,url:t.url||t.path,req_header_fs:t.req_header_fs,req_data:t.req_data,res_header:t.res_header,res_body:t.res_body,update_time:t.update_time},relations:{agent:t.agent,vulnerablities:[]}}}}):e._e()],1)],2)})),1)],1)])},S=[],$=(r("a4d3"),r("e01a"),r("9381")),D=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.searchObj={method:"",status:"",url:""},e.dataEnd=!1,e.page_index=1,e.pageSize=20,e.coverRate="",e.openCollapse=[0],e.apiList=[],e}return Object(c["a"])(r,[{key:"getColor",value:function(e){switch(e){case"GET":return{borderColor:"#61affe",bgColor:"rgba(97,175,254,.1)"};case"POST":return{borderColor:"#49cc90",bgColor:"rgba(73,204,144,.1)"};case"PUT":return{borderColor:"#fca130",bgColor:"rgba(252,161,48,.1)"};case"DELETE":return{borderColor:"#f93e3e",bgColor:"rgba(249,62,62,.1)"};default:return{borderColor:"#909399",bgColor:"#EBEEF5"}}}},{key:"getType",value:function(e){switch(e){case"GET":return"iast-tag-get";case"POST":return"iast-tag-post";case"PUT":return"iast-tag-put";case"DELETE":return"iast-tag-delete";default:return"iast-tag-other"}}},{key:"startView",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showSend&&(t.showSend=!1),e.next=3,this.services.project.relationrequest({project_id:this.projectId,version_id:this.versionId,api_route_id:t.id});case 3:r=e.sent,201!==r.status&&this.$message.error(r.msg),t.url=r.data.url,t.poolId=r.data.id,t.req_header_fs=r.data.req_header_fs,t.req_data=r.data.req_data,t.res_body=r.data.res_body,t.res_header=r.data.res_header,t.update_time=r.data.update_time,r.status&&this.$nextTick((function(){t.showSend=!0}));case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startSend",value:function(e){e.showSend&&(e.showSend=!1),this.$nextTick((function(){e.showSend=!0}))}},{key:"getApiList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingStart(),t=this.apiList.map((function(e){return e.id})),e.next=4,this.services.project.searchApi({exclude_ids:String(t),page_size:this.pageSize,page_index:this.page_index,uri:this.searchObj.url,http_method:this.searchObj.method,is_cover:this.searchObj.status,project_id:this.projectId,version_id:this.versionId});case 4:r=e.sent,this.loadingDone(),201!==r.status&&this.$message.error(r.msg),s=r.data.map((function(e){return{id:e.id,agent:e.agent,poolId:-1,parameters:e.parameters,path:e.path,vulnerablities:e.vulnerablities,method:e.method.apimethod,httpMethod:e.method.httpmethods[0],description:e.description,is_cover:e.is_cover,return_type:e.responses[0]&&e.responses[0].return_type,return_type_shortcut:e.responses[0]&&e.responses[0].return_type_shortcut,req_header_fs:"".concat(e.method.httpmethods[0]," ").concat(e.path," HTTP/1.1"),req_data:"",res_header:"",res_body:"",showSend:!1}})),this.apiList=this.apiList.concat(s),s.length<this.pageSize&&(this.dataEnd=!0);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchChange",value:function(){var e=this;this.apiList=this.apiList.filter((function(t){return t.method.indexOf(e.searchObj.method)>-1&&t.path.indexOf(e.searchObj.url)>-1&&(""===e.searchObj.status||void 0===e.searchObj.status||t.is_cover===e.searchObj.status)})),this.page_index=1,this.dataEnd=!1,this.getApiList()}},{key:"cover",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.project.coverRate({project_id:this.projectId,version_id:this.versionId});case 2:t=e.sent,201!==t.status&&this.$message.error(t.msg),this.coverRate=t.data.cover_rate;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cover(),this.pageSize=Math.ceil((document.body.clientHeight-280)/48),e.next=4,this.getApiList();case 4:window.addEventListener("scroll",this.myScroll);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeDestroy",value:function(){window.removeEventListener("scroll",this.myScroll)}},{key:"myScroll",value:function(){var e=document.documentElement.scrollTop+window.innerHeight>document.documentElement.offsetHeight-1;e&&(this.dataEnd||(this.page_index+=1,this.getApiList()))}}]),r}(d["a"]);Object(p["b"])([Object(h["c"])()],D.prototype,"versionId",void 0),Object(p["b"])([Object(h["c"])(String)],D.prototype,"projectId",void 0),D=Object(p["b"])([Object(h["a"])({name:"ApiList",components:{SearchCard:$["a"]}})],D);var T=D,E=T,A=(r("4f77"),Object(O["a"])(E,C,S,!1,null,null,null)),L=A.exports,R=r("6362"),z=r("7676"),P=r.n(z),V=r("9374"),F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticStyle:{width:"100%",height:"298px"},attrs:{id:"trend"}})},I=[],B=r("313e"),M=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(o["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"onDataChanged",value:function(){this.randerEchart()}},{key:"mounted",value:function(){this.randerEchart()}},{key:"randerEchart",value:function(){var e=[],t=[],r=[],s=[],a=[],n=[];this.data.forEach((function(i,o){e.push(i.day_label),t.push(i.day_num_level_1),r.push(i.day_num_level_2),s.push(i.day_num_level_3),a.push(i.day_num_level_5),n.push(i.day_num_level_4)}));var i={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{bottom:"0",data:["高危","中危","低危","提示","无风险"]},grid:{left:"3%",right:"5%",bottom:"8%",top:"8%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:e}],yAxis:[{type:"value"}],series:[{type:"line",markLine:{symbol:["none","none"],silent:!0,label:{show:!1},itemStyle:{normal:{color:"#F2F3F5"}},data:[{xAxis:0},{xAxis:1},{xAxis:2},{xAxis:3},{xAxis:4},{xAxis:5},{xAxis:6}]}},{name:"高危",type:"line",symbol:"circle",symbolSize:5,color:["#E56363"],itemStyle:{borderColor:"#ffffff",borderType:"solid",borderWidth:"1"},areaStyle:{color:new B["b"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(229, 99, 99, 0.66)"},{offset:1,color:"rgba(255,255,255,0)"}])},emphasis:{focus:"series"},data:t},{name:"中危",type:"line",symbol:"circle",symbolSize:5,color:["#F49E0B"],itemStyle:{borderColor:"#ffffff",borderType:"solid",borderWidth:"1"},areaStyle:{color:new B["b"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(244, 158, 11, 0.66)"},{offset:1,color:"rgba(255,255,255,0)"}])},emphasis:{focus:"series"},data:r},{name:"低危",type:"line",symbol:"circle",symbolSize:5,color:["#2F90EA"],itemStyle:{borderColor:"#ffffff",borderType:"solid",borderWidth:"1"},areaStyle:{color:new B["b"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(47, 144, 234, 0.66)"},{offset:1,color:"rgba(255,255,255,0)"}])},emphasis:{focus:"series"},data:s},{name:"提示",type:"line",symbol:"circle",symbolSize:5,color:["#ACB4C4"],itemStyle:{borderColor:"#ffffff",borderType:"solid",borderWidth:"1"},areaStyle:{color:new B["b"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(172, 180, 196, 0.66)"},{offset:1,color:"rgba(255,255,255,0)"}])},emphasis:{focus:"series"},data:a},{name:"无风险",type:"line",label:{show:!0,position:"top"},symbol:"circle",symbolSize:5,color:["#D8D8D8"],itemStyle:{borderColor:"#ffffff",borderType:"solid",borderWidth:"1"},areaStyle:{color:new B["b"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(216, 216, 216, 0.66)"},{offset:1,color:"rgba(255,255,255,0)"}])},emphasis:{focus:"series"},data:n}]},o=document.getElementById("trend");if(o){var c=B["c"](document.getElementById("trend"));c.setOption(i)}}}]),r}(d["a"]);Object(p["b"])([Object(h["c"])()],M.prototype,"data",void 0),Object(p["b"])([Object(h["e"])("data",{immediate:!0,deep:!0})],M.prototype,"onDataChanged",null),M=Object(p["b"])([Object(h["a"])({name:"Trend"})],M);var q=M,U=q,H=Object(O["a"])(U,F,I,!1,null,"f46776d0",null),W=H.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticStyle:{width:"100%"},style:{height:e.height+"px"},attrs:{id:"type"}})},N=[],J=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(o["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"onDataChanged",value:function(){this.randerEchart()}},{key:"mounted",value:function(){this.randerEchart()}},{key:"randerEchart",value:function(){var e=["高危","中危","低危","无风险","提示"],t=[{value:0,name:"高危"},{value:0,name:"中危"},{value:0,name:"低危"},{value:0,name:"无风险"},{value:0,name:"提示"}],r=[];this.data.forEach((function(s){e.push(s.type_name),t[s.type_level-1].value+=s.type_count,s.type_count,r.push({value:s.type_count,name:s.type_name})}));for(var s=0;s<t.length;s++)0===t[s].value&&(t.splice(s,1),e.splice(s,1),s--);var a={tooltip:{show:!0,formatter:function(e){if(1===e.componentIndex)return'\n            <div style="display: flex;align-items: center;justify-content: space-between;width:160px; ">\n                <p\n                style="display: flex;width:100px; align-items: center;color:'.concat(e.color,'" \n                >\n                <span style="display:inline-block;white-space:pre-wrap;width:100px;margin-right: 6px;">').concat(e.name,"</span><span>").concat(e.value,'</span></p>\n                <p style="color:#4A72AE">').concat(e.percent,"%</p>\n                ");var t={"高危":"#E56363","中危":"#F49E0B","低危":"#2F90EA","无风险":"#ACB4C4","提示":"#D8D8D8"};return'\n            <div style="display: flex;align-items: center;justify-content: space-between;width:160px;height:8px;">\n                <p\n                style="display: flex; align-items: center;color:'.concat(t[e.name],'" \n                ><span style="width: 4px; height: 4px; background:').concat(t[e.name],';  border-radius: 50%;  display: inline-block; margin-right: 4px;"></span> <span style=" margin-right: 6px;">').concat(e.name,"</span><span>").concat(e.value,'</span></p>\n                <p style="color:#4A72AE">').concat(e.percent,"%</p>\n                ")}},legend:{tooltip:{show:!0},bottom:"0",data:e,type:"scroll",formatter:function(e){return B["a"].truncateText(e,90,"14px Microsoft Yahei","…")}},series:[{name:"类型分布",type:"pie",selectedMode:"single",radius:[0,"30%"],center:["50%","45%"],label:{position:"inner",fontSize:12,color:"#fff"},color:["#E56363","#F49E0B","#2F90EA","#ACB4C4","#D8D8D8"],data:t},{name:"类型分布",type:"pie",radius:["45%","70%"],center:["50%","45%"],labelLine:{length:30},label:{show:!1},data:r}]},n=document.getElementById("type");if(n){var i=B["c"](n);i.setOption(a)}}}]),r}(d["a"]);Object(p["b"])([Object(h["c"])()],J.prototype,"data",void 0),Object(p["b"])([Object(h["c"])()],J.prototype,"height",void 0),Object(p["b"])([Object(h["e"])("data",{immediate:!0,deep:!0})],J.prototype,"onDataChanged",null),J=Object(p["b"])([Object(h["a"])({name:"Type"})],J);var Y=J,K=Y,Q=Object(O["a"])(K,G,N,!1,null,"79e00eb1",null),X=Q.exports,Z=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.exp_page=1,e.exp_total=0,e.type="docx",e.selectTab="desc",e.projectObj={id:0,mode:"",name:"",owner:"",latest_time:"",versionData:{},agent_languag:[]},e.showApiListFlag=!1,e.versionTemp={},e.versionList=[],e.versionFlag=!1,e.offsetHeight=0,e}return Object(c["a"])(r,[{key:"formatTimestamp",value:function(e){return Object(v["a"])(e)}},{key:"enterVersionDialog",value:function(){this.versionList.some((function(e){return e.isEdit}))?this.$message.error(this.$t("views.projectDetail.beforeClose")):this.versionFlag=!1}},{key:"versionCurrent",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.project.versionCurrent({version_id:t.version_id,project_id:this.$route.params.pid});case 2:if(r=e.sent,201===r.status){e.next=7;break}this.$message({type:"error",message:r.msg,showClose:!0}),e.next=16;break;case 7:return this.$message({type:"success",message:r.msg,showClose:!0}),this.versionList.forEach((function(e){return e.current_version=0})),t.current_version=1,e.next=12,this.showApiList();case 12:return e.next=14,this.projectsSummary();case 14:return e.next=16,this.getVersionList();case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"goProjectList",value:function(){this.$router.push({name:"projectManage"})}},{key:"changeActive",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectTab=t,this.$router.replace({query:P()(this.$route.query,{activeName:t})}),"desc"!==t){e.next=5;break}return e.next=5,this.projectsSummary(this.projectObj.versionData.version_id);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editVersion",value:function(e){this.versionList.some((function(e){return e.isEdit}))?this.$message({type:"error",message:this.$t("views.projectDetail.hasEdit"),showClose:!0}):(this.$set(e,"isEdit",!0),Object.assign(this.versionTemp,e))}},{key:"enterVersion",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.versionList.some((function(e,s){return e.version_name===t.version_name&&s!==r}))){e.next=3;break}return this.$message({type:"warning",message:this.$t("views.projectDetail.hasSame"),showClose:!0}),e.abrupt("return");case 3:if(t.version_id){e.next=16;break}return e.next=6,this.services.project.versionAdd(Object(n["a"])(Object(n["a"])({},t),{},{project_id:this.$route.params.pid}));case 6:if(s=e.sent,201===s.status){e.next=10;break}return this.$message({type:"error",message:s.msg,showClose:!0}),e.abrupt("return");case 10:this.$message({type:"success",message:s.msg,showClose:!0}),t.version_id=s.data.version_id,this.versionTemp={},this.$set(t,"isEdit",!1),e.next=25;break;case 16:return e.next=18,this.services.project.versionEdit(Object(n["a"])(Object(n["a"])({},t),{},{project_id:this.$route.params.pid}));case 18:if(a=e.sent,201===a.status){e.next=22;break}return this.$message({type:"error",message:a.msg,showClose:!0}),e.abrupt("return");case 22:this.$message({type:"success",message:a.msg,showClose:!0}),this.versionTemp={},this.$set(t,"isEdit",!1);case 25:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"cancelVersion",value:function(e,t){e.version_id?(Object.assign(e,this.versionTemp),this.$set(e,"isEdit",!1),this.versionTemp={}):this.versionList.splice(t,1)}},{key:"deleteVersion",value:function(e,t){var r=this;this.$confirm(this.$t("views.projectDetail.warningInfo"),this.$t("views.projectDetail.warning"),{confirmButtonText:this.$t("views.projectDetail.enterVersion"),cancelButtonText:this.$t("views.projectDetail.cancelVersion"),type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,r.services.project.versionDelete({version_id:e.version_id,project_id:r.$route.params.pid});case 2:a=s.sent,201!=a.status?r.$message({type:"error",message:a.msg,showClose:!0}):(r.$message({type:"success",message:a.msg,showClose:!0}),r.versionList.splice(t,1));case 4:case"end":return s.stop()}}),s)}))))}},{key:"addVersion",value:function(){this.versionList.some((function(e){return e.isEdit}))?this.$message({showClose:!0,message:this.$t("views.projectDetail.hasEdit"),type:"error"}):this.versionList.push({version_name:"",description:"",isEdit:!0})}},{key:"changeVersion",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.showApiList();case 2:this.$nextTick((function(){if("desc"===r.selectTab)r.projectsSummary(t);else if("vul"===r.selectTab){var e=r.$refs.vulListComponent;e.getTableData(!0),e.vulnSummary()}else if("component"===r.selectTab){var s=r.$refs.componentList;s.getTableData(!0),s.scaSummary()}else if("apiList"===r.selectTab){var a=r.$refs.apiList;a.searchChange()}}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showApiList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.project.searchApi({page_size:1,project_id:this.$route.params.pid,version_id:this.projectObj.versionData.version_id});case 2:t=e.sent,201!==t.status&&this.$message.error(t.msg),t.data.length>0?this.showApiListFlag=!0:(this.showApiListFlag=!1,"apiList"===this.selectTab&&(this.selectTab="desc"));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$route.query.activeName?this.selectTab=this.$route.query.activeName:this.selectTab="desc",e.next=3,this.showApiList();case 3:return e.next=5,this.projectsSummary();case 5:return e.next=7,this.getVersionList();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"projectsSummary",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.project.projectsSummary(this.$route.params.pid,t);case 2:if(r=e.sent,s=r.status,a=r.msg,i=r.data,201===s){e.next=9;break}return this.$message({type:"error",message:a,showClose:!0}),e.abrupt("return");case 9:this.projectObj=Object(n["a"])(Object(n["a"])({},i),{},{name:i.name,latest_time:Object(v["a"])(i.latest_time)});case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showVersion",value:function(){this.versionFlag=!0}},{key:"getVersionList",value:function(){var e=this;this.services.project.versionList(this.$route.params.pid).then((function(t){201===t.status?e.versionList=t.data:e.$message({type:"error",message:t.msg,showClose:!0})}))}},{key:"getTagColoe",value:function(e){switch(e){case"JAVA":return"danger";case"PYTHON":return"";default:return""}}}]),r}(d["a"]);Object(p["b"])([Object(h["e"])("$route.params.pid",{immediate:!0})],Z.prototype,"init",null),Z=Object(p["b"])([Object(h["a"])({name:"ProjectDetail",components:{VulListComponent:x,ScaList:R["default"],ApiList:L,Distribution:V["a"],Trend:W,Type:X}})],Z);var ee=Z,te=ee,re=(r("795e"),Object(O["a"])(te,s,a,!1,null,"787efb48",null));t["default"]=re.exports},fb48:function(e,t,r){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var s=r("a832");function a(e){return!0===s(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,r;return!1!==a(e)&&(t=e.constructor,"function"===typeof t&&(r=t.prototype,!1!==a(r)&&!1!==r.hasOwnProperty("isPrototypeOf")))}}}]);
//# sourceMappingURL=chunk-4a4f4bbb.83593e03.js.map