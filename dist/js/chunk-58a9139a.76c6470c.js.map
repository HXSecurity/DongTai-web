{"version":3,"sources":["webpack:///./src/views/setting/StrategyManage.vue?fdcc","webpack:///./src/views/setting/StrategyManage.vue?b6fd","webpack:///./src/views/setting/StrategyManage.vue?36cb","webpack:///./src/views/setting/StrategyManage.vue?2964","webpack:///./src/views/setting/StrategyManage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","userInfo","role","attrs","on","$event","toPath","undefined","_v","_s","$t","_e","nativeOn","type","indexOf","_k","keyCode","key","getTableData","model","value","callback","$$v","searchValue","expression","tableData","scopedSlots","_u","fn","ref","row","id","vul_name","vul_levels_map","level_id","stateChange","state","isEdit","staticStyle","deleteManage","page","page_size","total","handleSizeChange","handleCurrentChange","staticRenderFns","showDialog","vul_levels","dialogForm","vul_type","vul_desc","vul_fix","backItem","view","$router","push","name","query","loadingStart","services","setting","res","loadingDone","status","data","forEach","item","$set","name_value","$message","error","msg","getVulLevels","JSON","parse","stringify","editStrategyApi","addStrategyApi","addManage","success","dialogClose","updateManage","some","i","message","showClose","$confirm","confirmButtonText","cancelButtonText","then","flag","val","strategyList","length","alltotal","strategyDisable","strategyEnable","$store","getters","VueBase","component"],"mappings":"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","file":"js/chunk-58a9139a.76c6470c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StrategyManage.vue?vue&type=style&index=0&id=4d107377&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-warp\"},[_c('div',{staticClass:\"total-bar\"},[(_vm.userInfo.role === 1 || _vm.userInfo.role === 2)?_c('el-button',{staticClass:\"btn-border\",attrs:{\"size\":\"small\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){return _vm.toPath(undefined, undefined)}}},[_vm._v(_vm._s(_vm.$t('views.strategyManage.addTitle')))]):_vm._e(),_c('div',{staticClass:\"search-box\"},[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":_vm.$t('views.strategyManage.searchValue')},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getTableData($event)}},model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}}),_c('el-button',{staticClass:\"btn search\",on:{\"click\":_vm.getTableData}},[_vm._v(\" \"+_vm._s(_vm.$t('views.sensitiveManage.search'))+\" \")])],1)],1),_c('el-table',{staticClass:\"strategyManageTable\",attrs:{\"data\":_vm.tableData,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":_vm.$t('views.strategyManage.name'),\"prop\":\"vul_name\",\"min-width\":\"260px\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"two-line vul_name\",on:{\"click\":function($event){return _vm.toPath(1, row.id)}}},[_vm._v(\" \"+_vm._s(row.vul_name)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.strategyManage.level'),\"prop\":\"level_id\",\"min-width\":\"200px\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',[_vm._v(\" \"+_vm._s(_vm.vul_levels_map[row.level_id])+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.strategyManage.status'),\"prop\":\"state\",\"min-width\":\"140px\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{on:{\"click\":function($event){return _vm.stateChange(row.id, row.state)}}},[_c('el-switch',{attrs:{\"disabled\":_vm.userInfo.role !== 1 && _vm.userInfo.role !== 2,\"value\":row.state === 'enable',\"active-color\":\"#1A80F2\",\"inactive-color\":\"#C1C9D3\"}})],1)]}}])}),(_vm.userInfo.role === 1 || _vm.userInfo.role === 2)?_c('el-table-column',{attrs:{\"label\":_vm.$t('views.strategyManage.settings'),\"min-width\":\"160px\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"table-btn-box\"},[(!row.isEdit)?_c('el-button',{staticStyle:{\"color\":\"#4a72ae\"},attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPath(undefined, row.id)}}},[_vm._v(_vm._s(_vm.$t('views.strategyManage.edit')))]):_vm._e(),_c('span',{staticClass:\"l\"},[_vm._v(\" | \")]),_c('el-button',{staticStyle:{\"color\":\"#f56262\"},attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteManage(row)}}},[_vm._v(_vm._s(_vm.$t('views.strategyManage.del')))])],1)]}}],null,false,1472199598)}):_vm._e()],1),_c('div',{staticClass:\"pagination-box\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.page,\"background\":\"\",\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.page_size,\"layout\":\" prev, pager, next, jumper, sizes, total\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport VueBase from '@/VueBase'\nimport { Component } from 'vue-property-decorator'\nimport { StrategyListObj } from '@/views/setting/types'\n\n@Component({ name: 'StrategyManage' })\nexport default class StrategyManage extends VueBase {\n  private tableData: Array<StrategyListObj> = []\n  private showDialog = false\n  private searchValue = ''\n  private vul_levels = []\n  private vul_levels_map = {}\n  private page = 1\n  private page_size = 20\n  private total = 0\n  private dialogForm: any = {\n    vul_name: '',\n    vul_type: '',\n    state: '',\n    vul_desc: '',\n    level_id: undefined,\n    vul_fix: '',\n  }\n  private toPath(view: any, id: any) {\n    this.$router.push({\n      name: 'strategy',\n      query: {\n        view,\n        id,\n      },\n    })\n  }\n  async getVulLevels() {\n    this.loadingStart()\n    const res = await this.services.setting.vul_levels()\n    this.loadingDone()\n    if (res.status === 201) {\n      this.vul_levels = res.data\n      this.vul_levels.forEach((item: any) => {\n        this.$set(this.vul_levels_map, item.id, item.name_value)\n      })\n    } else {\n      this.$message.error(res.msg)\n    }\n  }\n  async created() {\n    await this.getVulLevels()\n    await this.getTableData()\n  }\n  addStrategy() {\n    this.showDialog = true\n  }\n  editStrategy(row: any) {\n    this.dialogForm = JSON.parse(JSON.stringify(row))\n    this.showDialog = true\n  }\n  dialogEnter() {\n    if (this.dialogForm.id) {\n      this.editStrategyApi()\n    } else {\n      this.addStrategyApi()\n    }\n  }\n  async addStrategyApi() {\n    const { status, msg } = await this.services.setting.addManage({\n      vul_name: this.dialogForm.vul_name,\n      vul_desc: this.dialogForm.vul_desc,\n      vul_fix: this.dialogForm.vul_fix,\n      vul_type: this.dialogForm.vul_name,\n      level_id: this.dialogForm.level_id,\n      state: this.dialogForm.state,\n    })\n    if (status === 201) {\n      this.$message.success(msg)\n      this.getTableData()\n      this.dialogClose()\n    } else {\n      this.$message.error(msg)\n    }\n  }\n  async editStrategyApi() {\n    this.loadingStart()\n    const { status, msg } = await this.services.setting.updateManage(\n      this.dialogForm.id,\n      {\n        vul_name: this.dialogForm.vul_name,\n        vul_desc: this.dialogForm.vul_desc,\n        vul_fix: this.dialogForm.vul_fix,\n        vul_type: this.dialogForm.vul_name,\n        level_id: this.dialogForm.level_id,\n        state: this.dialogForm.state,\n      }\n    )\n    this.loadingDone()\n    if (status === 201) {\n      this.$message.success(msg)\n      this.getTableData()\n      this.dialogClose()\n    } else {\n      this.$message.error(msg)\n    }\n  }\n  dialogClose() {\n    this.showDialog = false\n    this.dialogForm = {\n      vul_name: '',\n      vul_type: '',\n      state: '',\n      vul_desc: '',\n      level_id: undefined,\n      vul_fix: '',\n    }\n  }\n  get userInfo(): { username: string; role: number } {\n    return this.$store.getters.userInfo\n  }\n\n  private backItem = {}\n  private editStart(item: any) {\n    this.showDialog = true\n    this.dialogForm = JSON.parse(JSON.stringify(item))\n  }\n\n  private async deleteManage(item: any) {\n    if (this.tableData.some((i: any) => i.isEdit)) {\n      this.$message({\n        type: 'warning',\n        message: this.$t('views.strategyManage.warning') as string,\n        showClose: true,\n      })\n      return\n    }\n    this.$confirm(\n      this.$t('views.strategyManage.deleteWarning') as string,\n      this.$t('views.strategyManage.deletePop') as string,\n      {\n        confirmButtonText: this.$t('views.strategyManage.enter') as string,\n        cancelButtonText: this.$t('views.strategyManage.clear') as string,\n        type: 'warning',\n      }\n    ).then(async () => {\n      const { status, msg } = await this.services.setting.deleteManage(item.id)\n      if (status !== 201) {\n        this.$message({\n          type: 'error',\n          message: msg,\n          showClose: true,\n        })\n      } else {\n        this.$message({ type: 'success', message: msg, showClose: true })\n        await this.getTableData()\n      }\n    })\n  }\n\n  private async editEnd(item: any, flag: boolean) {\n    if (flag) {\n      const { status, msg } = await this.services.setting.updateManage(\n        item.id,\n        { name: item.vul_name, vul_desc: item.vul_desc, vul_fix: item.vul_fix }\n      )\n      if (status !== 201) {\n        this.$message({\n          type: 'error',\n          message: msg,\n          showClose: true,\n        })\n      } else {\n        this.$message({ type: 'success', message: msg, showClose: true })\n      }\n    } else {\n      for (const key in item) {\n        item[key] = this.backItem[key]\n      }\n      this.backItem = {}\n    }\n    this.$set(item, 'isEdit', false)\n  }\n\n  private async handleCurrentChange(page: number) {\n    this.page = page\n    await this.getTableData()\n  }\n\n  private handleSizeChange(val: number) {\n    this.page_size = val\n    this.getTableData()\n  }\n\n  private async getTableData() {\n    this.loadingStart()\n    const {\n      status,\n      msg,\n      data,\n      page,\n    } = await this.services.setting.strategyList(false, {\n      page: this.page,\n      page_size: this.page_size,\n      name: this.searchValue,\n    })\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message({\n        type: 'error',\n        message: msg,\n        showClose: true,\n      })\n      return\n    }\n    if (data.length === 0 && this.page > 1) {\n      this.page--\n      await this.getTableData()\n      return\n    }\n    this.total = page.alltotal\n    this.tableData = data\n  }\n\n  private async stateChange(id: number, state: string) {\n    if (this.userInfo.role !== 1 && this.userInfo.role !== 2) {\n      return\n    }\n    if (state === 'enable') {\n      this.loadingStart()\n      const { status, msg } = await this.services.setting.strategyDisable(id)\n      this.loadingDone()\n      if (status !== 201) {\n        this.$message({\n          type: 'error',\n          message: msg,\n          showClose: true,\n        })\n        return\n      }\n      await this.getTableData()\n    }\n    if (state === 'disable') {\n      this.loadingStart()\n      const { status, msg } = await this.services.setting.strategyEnable(id)\n      this.loadingDone()\n      if (status !== 201) {\n        this.$message({\n          type: 'error',\n          message: msg,\n          showClose: true,\n        })\n        return\n      }\n      await this.getTableData()\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StrategyManage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StrategyManage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StrategyManage.vue?vue&type=template&id=4d107377&scoped=true&\"\nimport script from \"./StrategyManage.vue?vue&type=script&lang=ts&\"\nexport * from \"./StrategyManage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./StrategyManage.vue?vue&type=style&index=0&id=4d107377&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d107377\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}